plot(tacos)
text(tacos, labels = rownames(tacos))
restaurantNames <- c("Rice Village", "West U", "Shepherd", "Houston Heights")
#  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #
# SOC 460/560: Spatial Analysis in the Social Sciences
# Professor Elizabeth Roberto (eroberto@rice.edu)
# Week 1
#  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #
# Use Google Maps to find the latitude and longitude for
#  the four Torchy's Tacos locations inside the I-610 loop in Houston
# For example: 29.718032, -95.390063
# To find the coordinates, follow these instructions:
# https://support.google.com/maps/answer/18539?hl=en&ref_topic=3092444
#  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #
# DATA
# Combine the coordinates into a data.frame or matrix called "tacos" with
#  4 rows (1 for each location) and 2 columns (latitude and longitude)
# Name the rows
# Tip: the names of each location can be found on the Torchy's Tacos site
# Name the columns
# Tip: Google Maps lists the coordinates as latitude first then longitude
# Change the order of the columns so that
#  longitude is in the first column and latitude is in the second
#  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #
# "Rice Village", "West U", "Shepherd", "Houston Heights"
restaurantNames <- c("Rice Village", "West U", "Shepherd", "Houston Heights")
Latitude <- c(29.718522764796194, 29.72366599578966, 29.7219061, 29.7913524)
Longitude <- c(-95.41353490539447, -95.43576505367844, -95.4786933, -95.7845939)
tacos <- data.frame(Longitude, Latitude)
row.names(tacos) <- restaurantNames
# MAP
# Plot the locations using the "plot" function
# Label the points with the names of the locations using the "text" function
# Change the position of the location labels
#  using the text function's "pos=" option
# The help page for the text function (type ?text in the console)
#  provides more information about commonly used options,
#  including the values of the "pos" option
#  #  #  #  #  #  #  #  #  #  #  #  #  #
# Install and/or load the "maps" package
#install.packages("maps")
library(maps)
# Plot a county map of Texas
map("county", "texas")
# Add the locations to the map using the "points" function
#  #  #  #  #  #  #  #  #  #  #  #  #  #
plot(tacos)
text(tacos, labels = rownames(tacos))
# Install and/or load the "leaflet" package
install.packages("leaflet")
library(leaflet)
# Try running the following code (your default web browser will open)
leaflet(tacos) %>%
addTiles() %>%
addMarkers(popup=rownames(tacos))
#  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #
estaurantNames <- c("Rice Village", "West U", "Shepherd", "Houston Heights")
Latitude <- c(29.718522764796194, 29.72366599578966, 29.7219061, 29.7913524)
Longitude <- c(-95.41353490539447, -95.43576505367844, -95.4786933, -95.7845939)
tacos <- data.frame(Longitude, Latitude)
row.names(tacos) <- restaurantNames
View(tacos)
Longitude <- c(-95.41353490539447, -95.43576505367844, -95.4075406963005, -95.39912928897121)
View(tacos)
View(tacos)
restaurantNames <- c("Rice Village", "West U", "Shepherd", "Houston Heights")
Latitude <- c(29.718522764796194, 29.72366599578966, 29.745524121412785, 29.803931892525704)
Longitude <- c(-95.41353490539447, -95.43576505367844, -95.4075406963005, -95.39912928897121)
tacos <- data.frame(Longitude, Latitude)
row.names(tacos) <- restaurantNames
View(df)
View(tacos)
plot(tacos)
text(tacos, labels = rownames(tacos))
text(tacos, labels = rownames(tacos), pos = 2)
text(tacos, labels = rownames(tacos), pos = 2)
plot(tacos)
text(tacos, labels = rownames(tacos), pos = 2)
text(tacos, labels = rownames(tacos), pos = 3)
text(tacos, labels = rownames(tacos), pos = 3)
plot(tacos)
text(tacos, labels = rownames(tacos), pos = 3)
points(tacos)
text(tacos, labels = rownames(tacos), pos = 3)
points(tacos)
text(tacos, labels = rownames(tacos), pos = 3)
map("county", "texas")
points(tacos)
text(tacos, labels = rownames(tacos), pos = 3)
help(package='maps')
# Plot a county map of Texas
map("houston")
"West U", "Shepherd", "Houston Heights")
Latitude <- c(29.718522764796194, 29.72366599578966, 29.745524121412785, 29.803931892525704)
Longitude <- c(-95.41353490539447, -95.43576505367844, -95.4075406963005, -95.39912928897121)
tacos <- data.frame(Longitude, Latitude)
row.names(tacos) <- restaurantNames
# Install and/or load the "maps" package
#install.packages("maps")
library(maps)
# Plot a county map of Texas
map("county", "harris")
# Plot a county map of Texas
map("county", "texas")
points(tacos)
text(tacos, labels = rownames(tacos), pos = 3)
# Plot a county map of Texas
map("county", "usa")
# Plot a county map of Texas
map("county", "georgia")
# Plot a county map of Texas
map("county", "texas")
# Plot a county map of Texas
map("county", "texas")
# Plot a county map of Texas
map("county", "georgia")
# Plot a county map of Texas
map("texas")
# Plot a county map of Texas
map("county")
help(package='maps')
# Plot a county map of Texas
map("county", "texas:south")
# Plot a county map of Texas
map("usa", "texas:south")
# Plot a county map of Texas
map("usa", "texas")
# Plot a county map of Texas
map("usa", "texas")
# Plot a county map of Texas
map("usa")
# Plot a county map of Texas
map("county")
# Plot a county map of Texas
map("county", "texas")
# Plot a county map of Texas
map("uscities")
# Plot a county map of Texas
map("us.cities")
# Plot a county map of Texas
map("us.cities", "name")
# Plot a county map of Texas
map(us.cities)
# Plot a county map of Texas
map("us.cities")
# Plot a county map of Texas
map("state")
# Plot a county map of Texas
map("state")
# Plot a county map of Texas
map("county", c("texas", "louisiana"))
points(tacos)
# Plot a county map of Texas
map("county", c("texas", "louisiana"))
# Plot a county map of Texas
map("county", c("texas", "georgia"))
# Plot a county map of Texas
map("usa", c("texas", "georgia"))
# Plot a county map of Texas
map("state", c("texas", "georgia"))
# Plot a county map of Texas
map("state", "texas")
points(tacos)
# Plot a county map of Texas
map("county", "texas", xlim = c(-96, -95), ylim = c(29, 30))
# Plot a county map of Texas
map("county", "texas", xlim = c(-100, -90), ylim = c(25, 35))
# Plot a county map of Texas
map("county", "texas", xlim = c(-97, -94), ylim = c(28, 31))
points(tacos)
# Plot a county map of Texas
map("county", "texas", xlim = c(-96.5, -94.5), ylim = c(28.5, 30.5))
points(tacos)
# Plot a county map of Texas
map("county", "texas", xlim = c(-96, -95), ylim = c(29.5, 30.5))
points(tacos)
# Plot a county map of Texas
map("county", "texas", xlim = c(-96, -94.8), ylim = c(29.5, 30.2))
points(tacos)
text(tacos, labels = rownames(tacos), pos = 3)
points(tacos)
plot.new()
points(tacos)
# Plot a county map of Texas
map("county", "texas", xlim = c(-96, -94.8), ylim = c(29.5, 30.2))
text(tacos, labels = rownames(tacos), pos = 3)
points(tacos)
# Plot a county map of Texas
map("county", "texas", xlim = c(-95.6, -95.2), ylim = c(29.5, 30.2))
points(tacos)
# Plot a county map of Texas
map("county", "texas", xlim = c(-96, -94.8), ylim = c(29.5, 30.2))
rownames(tacos)
est U", "Shepherd", "Houston Heights")
Latitude <- c(29.718522764796194, 29.72366599578966, 29.745524121412785, 29.803931892525704)
Longitude <- c(-95.41353490539447, -95.43576505367844, -95.4075406963005, -95.39912928897121)
tacos <- data.frame(Longitude, Latitude)
rownames(tacos) <- restaurantNames
restaurantNames <- c("Rice Village", "West U", "Shepherd", "Houston Heights")
Latitude <- c(29.718522764796194, 29.72366599578966, 29.745524121412785, 29.803931892525704)
Longitude <- c(-95.41353490539447, -95.43576505367844, -95.4075406963005, -95.39912928897121)
tacos <- data.frame(Longitude, Latitude)
rownames(tacos) <- restaurantNames
map("county", "texas", xlim = c(-96, -94.8), ylim = c(29.5, 30.2))
# Add the locations to the map using the "points" function
#  #  #  #  #  #  #  #  #  #  #  #  #  #
points(tacos)
text(tacos, labels = rownames(tacos), pos = 3)
rownames(tacos)
# Install and/or load the "leaflet" package
#install.packages("leaflet")
library(leaflet)
# Install and/or load the "leaflet" package
install.packages("leaflet")
library(leaflet)
# Install and/or load the "maps" package
#install.packages("maps")
library(maps)
library(leaflet)
# Install and/or load the "leaflet" package
install.packages("fansi")
# Install and/or load the "leaflet" package
install.packages("leaflet")
library(leaflet)
leaflet(tacos) %>%
addTiles() %>%
addMarkers(popup=rownames(tacos))
library(sf)
library(mapsf)
library(RColorBrewer)
ory
load("highered_00001.dat")
?load
load("~/Downloads/highered_00001.dat")
install.packages('ipumsr')
load("~/Downloads/highered_00001.dat")
load("~/Downloads/highered_00001.dat.gz")
ddi <- read_ipums_ddi("highered_00001.xml")
?ipmus
library(ipumsr)
load("~/Downloads/highered_00001.dat.gz")
ddi <- read_ipums_ddi("highered_00001.xml")
load("~/Downloads/highered_00001.dat")
load("~/Downloads/highered_00001.dat")
# Load
source("~/Downloads/highered_00001.dat")
PERSONID
?labs
library(ggplot2)
library(sf)
library(dplyr)
library(RColorBrewer)
library(spdep)
library(writexl)
library(compare)
library(httr2)
library(jsonlite)
library(stringr)
setwd("~/Desktop/soci460_stuff/SOCI460Project")
#load source files
source("localhelpers.R")
source("apicalls.R")
city_info <- data.frame(c("dallas", "houston", "atlanta", "miami", "dc"),
c("dal", "hou", "atl", "mia", "dc"),
c("Dallas", "Houston", "Atlanta", "Miami", "DC"))
colnames(city_info) <- c("LONG", "SHORT", "DISPLAY")
city_index <- 1
setwd("~/Desktop/soci460_stuff/SOCI460Project")
#get long and short names of the city
city_long_name <- city_info[city_index, "LONG"]
city_short_name <- city_info[city_index, "SHORT"]
city_display_name <- city_info[city_index, "DISPLAY"]
#get filenames
block_data_shapefile_filename <- paste0(city_long_name, "_values")
stop_shapefile_name <- paste0(city_short_name, ".stops.no_repeats")
#extract block group data from shapefile
values <- setupBlockGroups(block_data_shapefile_filename)
print("block group data extracted")
#extract stop data from shapefile
stops <- setupStops(stop_shapefile_name)
print("stop data extracted")
#get shapefile with full values
values_full <- st_read(dsn=paste0("blockdata/", city_long_name, ".block_group_full_data"), layer=paste0(city_long_name, ".block_group_full_data"),
stringsAsFactors=FALSE, options="ENCODING=latin1")
#if directory doesn't exist for this city's plots, create it
if (!dir.exists(paste0("plots/", city_long_name))) {
dir.create(paste0("plots/", city_long_name))
}
#set working directory to the plots subdirectory for this city
setwd(paste0("~/Desktop/soci460_stuff/SOCI460Project/plots/", city_long_name))
View(tacos)
rm(tacos)
rm(Latitude, Longitude, restaurantNames)
#set working directory to the plots subdirectory for this city
setwd(paste0("~/Desktop/soci460_stuff/SOCI460Project/plots/", city_long_name))
?png
png(filename = paste0(city_long_name, " income.png"))
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
#if directory doesn't exist for plots, create it
if (!dir.exists("plots")) {
dir.create("plots")
}
#if directory doesn't exist for this city's plots, create it
if (!dir.exists(paste0("plots/", city_long_name))) {
dir.create(paste0("plots/", city_long_name))
}
#set working directory to the plots subdirectory for this city
setwd(paste0("~/Desktop/soci460_stuff/SOCI460Project/plots/", city_long_name))
setwd("~/Desktop/soci460_stuff/SOCI460Project")
dir.create("plots")
#if directory doesn't exist for this city's plots, create it
if (!dir.exists(paste0("plots/", city_long_name))) {
dir.create(paste0("plots/", city_long_name))
}
#set working directory to the plots subdirectory for this city
setwd(paste0("~/Desktop/soci460_stuff/SOCI460Project/plots/", city_long_name))
#plot income
png(filename = paste0(city_long_name, " income.png"))
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
jpeg(filename = paste0(city_long_name, " income.jpeg"))
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
jpeg(filename = paste0(city_long_name, " income.jpeg"), res = 100)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
#plot income
jpeg(filename = paste0(city_long_name, " income.jpeg"), res = 1000)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
#plot income
jpeg(filename = paste0(city_long_name, " income.jpeg"), width = 1000, height = 1000, res = 1000)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
jpeg(filename = paste0(city_long_name, " income.jpeg"), width = 1000, height = 1000, res = 100)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
jpeg(filename = paste0(city_long_name, " income.jpeg"), width = 1000, height = 1000, res = 200)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
#plot income
jpeg(filename = paste0(city_long_name, " income.jpeg"), width = 1000, height = 1000, res = 500)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
#plot income
jpeg(filename = paste0(city_long_name, " income.jpeg"), width = 1000, height = 1000, res = 300)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
#plot income
jpeg(filename = paste0(city_long_name, " income.jpeg"), width = 1000, height = 1000, res = 200)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
#plot income
jpeg(filename = paste0(city_long_name, " income.jpeg"), width = 1000, height = 1000, res = 250)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Transit Stop"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
#plot value
pdf(paste0(city_long_name, " value.pdf"))
dev.off()
#plot income
jpeg(filename = paste0(city_long_name, " income.jpeg"), width = 1000, height = 1000, res = 200)
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
dev.off()
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = ""), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
?aes
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = ""), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
?theme_void
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = ""), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes (color = "Rail Transit stops"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
?labs
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes(color = "Rail Transit stops"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"))+
theme_void()
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes(color = "Rail Transit stops"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Median Household Income\nin the Past 12 months")+
theme_void()
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes(color = "Rail Transit stops"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Annual Median Household Income")+
theme_void()
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
geom_sf(data = stops, aes(color = "Rail Transit stops"), size = 0.5)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Annual Median \nHousehold Income")+
theme_void()
values_full %>%
ggplot()+
geom_sf(data = values_full, aes(fill = INCOME), lwd = 0)+
labs(title = paste0(city_display_name, " Block Group By Median Household Income"),
fill = "Annual Median \nHousehold Income")+
theme_void()
